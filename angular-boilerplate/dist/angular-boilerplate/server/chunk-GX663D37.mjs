import './polyfills.server.mjs';
import{a as j,b as M,c as D}from"./chunk-U5NP35D4.mjs";import{n as O,r as w}from"./chunk-6QCSGKPO.mjs";import{a as L}from"./chunk-5MWZU3IA.mjs";import{i as N}from"./chunk-V7CMVNQF.mjs";import{p as P,t as F}from"./chunk-TCURBYIA.mjs";import{Cb as a,Db as n,Eb as v,Hb as _,Jb as h,Jc as b,Kb as p,Kc as T,Nc as E,Pb as c,Qb as x,Yb as C,Zb as U,_a as f,_b as y,ab as r,ac as S,bc as I,fb as m,kb as g,oa as d,pa as u,pb as l,yb as s}from"./chunk-LQE7B4AG.mjs";import"./chunk-X2SEQXRR.mjs";var V=(e,i)=>({itemsPerPage:10,currentPage:e,totalItems:i}),A=e=>["/users",e];function z(e,i){e&1&&(a(0,"div",5)(1,"div",6)(2,"span",7),c(3,"Loading..."),n()()())}function B(e,i){e&1&&(a(0,"div",5)(1,"p"),c(2,"No users found."),n()())}function q(e,i){}function G(e,i){if(e&1&&(a(0,"li",12),v(1,"img",13),a(2,"a",14),c(3),n(),l(4,q,0,0,"ng-template",null,0,I),n()),e&2){let t=i.$implicit;r(),s("src",t.gravatar,f)("alt",t.name),r(),s("routerLink",C(4,A,t.id)),r(),x(t.username)}}function H(e,i){if(e&1&&(a(0,"ul",10),l(1,G,6,6,"li",11),y(2,"paginate"),n()),e&2){let t=p(2);r(),s("ngForOf",S(2,1,t.users,U(4,V,t.page,t.totalCount)))}}function J(e,i){if(e&1){let t=_();a(0,"div",15)(1,"pagination-controls",16),h("pageChange",function(k){d(t);let R=p(2);return u(R.handlePageChange(k))}),n()()}}function K(e,i){if(e&1&&(a(0,"div"),l(1,B,3,0,"div",3)(2,H,3,7,"ul",8)(3,J,2,0,"div",9),n()),e&2){let t=p();r(),s("ngIf",t.users.length===0),r(),s("ngIf",t.users.length>0),r(),s("ngIf",t.totalCount>10)}}var $=class e{constructor(i,t,o){this.userService=i;this.toastr=t;this.store=o;this.currentUser$=this.store.select(w)}users=[];loading=!0;page=1;totalCount=0;currentUser$;ngOnInit(){this.fetchUsers()}fetchUsers(){this.loading=!0,this.userService.getUsers({page:this.page}).subscribe({next:i=>{this.users=i.content,this.totalCount=i.totalElements,this.loading=!1},error:i=>{console.error(i),this.toastr.error("Failed to fetch users"),this.loading=!1}})}handlePageChange(i){this.page=i,this.fetchUsers()}confirmDelete(i,t){confirm(`Are you sure you want to delete ${t}?`)&&this.userService.deleteUser(i).subscribe({next:o=>{o.flash?this.toastr.success(o.flash[1]):this.toastr.success("User deleted successfully"),this.fetchUsers()},error:o=>{console.error(o),this.toastr.error("Failed to delete user")}})}static \u0275fac=function(t){return new(t||e)(m(L),m(N),m(O))};static \u0275cmp=g({type:e,selectors:[["app-users"]],decls:5,vars:2,consts:[["noUser",""],[1,"container","py-4"],[1,"mb-4"],["class","text-center py-4",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["class","list-group",4,"ngIf"],["class","d-flex justify-content-center mt-4",4,"ngIf"],[1,"list-group"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","align-items-center"],["width","50","height","50",1,"rounded-circle","me-3",3,"src","alt"],[1,"flex-grow-1",3,"routerLink"],[1,"d-flex","justify-content-center","mt-4"],[3,"pageChange"]],template:function(t,o){t&1&&(a(0,"div",1)(1,"h1",2),c(2,"All users"),n(),l(3,z,4,0,"div",3)(4,K,4,3,"div",4),n()),t&2&&(r(3),s("ngIf",o.loading),r(),s("ngIf",!o.loading))},dependencies:[E,b,T,F,P,D,j,M],encapsulation:2})};export{$ as UsersComponent};
