import{b as P,c as R,d as L,e as q,f as B,g as D,h as U,i as j,j as x}from"./chunk-JRTDSWL7.js";import{a as O}from"./chunk-AXGAXXZL.js";import{h as I}from"./chunk-H52KW6AO.js";import{j as W,k as N,o as F}from"./chunk-P5VQLAOY.js";import{$a as a,Ab as r,Bb as _,Eb as h,Gb as v,Hb as y,Mb as m,Nb as M,Qb as g,Rb as f,Sb as c,eb as S,jb as b,ob as C,qa as l,ra as d,rc as E,sc as V,vb as u,vc as T,zb as t}from"./chunk-H7CNO3QB.js";function A(o,n){if(o&1&&(t(0,"li"),m(1),r()),o&2){let s=n.$implicit;a(),M(s)}}function G(o,n){if(o&1&&(t(0,"div",18)(1,"ul",19),C(2,A,2,1,"li",20),r()()),o&2){let s=y();a(2),u("ngForOf",s.errorMessage)}}function z(o,n){o&1&&_(0,"span",21)}var k=class o{constructor(n,s,e){this.userService=n;this.router=s;this.toastr=e}name="";email="";password="";passwordConfirmation="";errorMessage=[];submitting=!1;handleSubmit(){this.submitting=!0,this.errorMessage=[],this.userService.createUser({user:{name:this.name,email:this.email,password:this.password,password_confirmation:this.passwordConfirmation}}).subscribe({next:n=>{n.user&&(n.flash&&this.toastr.success(n.flash[1]),this.router.navigate(["/"])),n.error&&(this.errorMessage=n.error),this.submitting=!1},error:n=>{console.error(n),this.toastr.error("Failed to create account. Please try again."),this.submitting=!1}})}static \u0275fac=function(s){return new(s||o)(S(O),S(W),S(I))};static \u0275cmp=b({type:o,selectors:[["app-signup"]],decls:30,vars:7,consts:[["signupForm","ngForm"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"ngSubmit"],["class","alert alert-danger",4,"ngIf"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","passwordConfirmation",1,"form-label"],["type","password","id","passwordConfirmation","name","passwordConfirmation","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center"],["routerLink","/account_activations/new",1,"btn","btn-success"],[1,"alert","alert-danger"],[1,"mb-0"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,e){if(s&1){let p=h();t(0,"h1"),m(1,"Sign up"),r(),t(2,"div",1)(3,"div",2)(4,"form",3,0),v("ngSubmit",function(){return l(p),d(e.handleSubmit())}),C(6,G,3,1,"div",4),t(7,"div",5)(8,"label",6),m(9,"Name"),r(),t(10,"input",7),c("ngModelChange",function(i){return l(p),f(e.name,i)||(e.name=i),d(i)}),r()(),t(11,"div",5)(12,"label",8),m(13,"Email"),r(),t(14,"input",9),c("ngModelChange",function(i){return l(p),f(e.email,i)||(e.email=i),d(i)}),r()(),t(15,"div",5)(16,"label",10),m(17,"Password"),r(),t(18,"input",11),c("ngModelChange",function(i){return l(p),f(e.password,i)||(e.password=i),d(i)}),r()(),t(19,"div",5)(20,"label",12),m(21,"Confirmation"),r(),t(22,"input",13),c("ngModelChange",function(i){return l(p),f(e.passwordConfirmation,i)||(e.passwordConfirmation=i),d(i)}),r()(),t(23,"button",14),C(24,z,1,0,"span",15),m(25," Create my account "),r()()()(),_(26,"br"),t(27,"div",16)(28,"a",17),m(29," Resend activation email "),r()()}s&2&&(a(6),u("ngIf",e.errorMessage.length>0),a(4),g("ngModel",e.name),a(4),g("ngModel",e.email),a(4),g("ngModel",e.password),a(4),g("ngModel",e.passwordConfirmation),a(),u("disabled",e.submitting),a(),u("ngIf",e.submitting))},dependencies:[T,E,V,F,N,x,D,P,R,L,U,j,B,q],encapsulation:2})};export{k as SignupComponent};
