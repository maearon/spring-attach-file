import{a as D,b as M,c as N}from"./chunk-WYIYOJMX.js";import{a as V}from"./chunk-AXGAXXZL.js";import{h as j}from"./chunk-H52KW6AO.js";import{h as R,j as P,k as T,l as A,o as O}from"./chunk-P5VQLAOY.js";import{$a as o,Ab as r,Bb as f,Eb as y,Gb as S,Hb as c,Mb as s,Nb as v,Ob as C,Pb as g,Ub as I,Vb as d,Wb as F,Xb as b,Za as u,Zb as E,eb as p,jb as x,ob as m,qa as w,ra as _,rc as k,sc as U,vb as a,vc as L,zb as n}from"./chunk-H7CNO3QB.js";var $=e=>["/users",e],q=()=>({exact:!0}),G=e=>["/users",e,"following"],H=e=>["/users",e,"followers"],J=(e,i)=>({itemsPerPage:10,currentPage:e,totalItems:i});function K(e,i){e&1&&(n(0,"div",10)(1,"div",11)(2,"span",12),s(3,"Loading..."),r()()())}function Q(e,i){if(e&1&&(n(0,"div",10)(1,"p"),s(2),r()()),e&2){let t=c(2);o(2),C("No ",t.type==="following"?"following":"followers"," yet.")}}function W(e,i){if(e&1&&(n(0,"li",18),f(1,"img",19),n(2,"a",20),s(3),r()()),e&2){let t=i.$implicit;o(),a("src",t.gravatar,u)("alt",t.name),o(),a("routerLink",d(4,$,t.id)),o(),v(t.name)}}function X(e,i){if(e&1&&(n(0,"ul",16),m(1,W,4,6,"li",17),b(2,"paginate"),r()),e&2){let t=c(2);o(),a("ngForOf",E(2,1,t.users,F(4,J,t.page,t.totalCount)))}}function Y(e,i){if(e&1){let t=y();n(0,"div",21)(1,"pagination-controls",22),S("pageChange",function(h){w(t);let B=c(2);return _(B.handlePageChange(h))}),r()()}}function Z(e,i){if(e&1&&(n(0,"div")(1,"h2",13),s(2),r(),m(3,Q,3,1,"div",8)(4,X,3,7,"ul",14)(5,Y,2,0,"div",15),r()),e&2){let t=c();o(2),g("",t.type==="following"?"Following":"Followers"," (",t.totalCount,")"),o(),a("ngIf",t.users.length===0),o(),a("ngIf",t.users.length>0),o(),a("ngIf",t.totalCount>10)}}var z=class e{constructor(i,t,l,h){this.route=i;this.router=t;this.userService=l;this.toastr=h}userId="";type="following";loading=!0;page=1;users=[];totalCount=0;profileUser={name:"",gravatar:"",micropost:0,following:0,followers:0};ngOnInit(){this.route.paramMap.subscribe(i=>{this.userId=i.get("id")||""}),this.route.data.subscribe(i=>{this.type=i.type||"following",this.fetchData()})}fetchData(){this.loading=!0,this.type==="following"?this.userService.getFollowing(this.userId,this.page).subscribe({next:this.handleResponse.bind(this),error:this.handleError.bind(this)}):this.userService.getFollowers(this.userId,this.page).subscribe({next:this.handleResponse.bind(this),error:this.handleError.bind(this)})}handleResponse(i){this.users=i.users,this.totalCount=i.totalElements,this.profileUser=i.user,this.loading=!1}handleError(i){console.error(i),this.toastr.error(`Failed to fetch ${this.type}`),this.loading=!1}handlePageChange(i){this.page=i,this.fetchData()}static \u0275fac=function(t){return new(t||e)(p(R),p(P),p(V),p(j))};static \u0275cmp=x({type:e,selectors:[["app-show-follow"]],decls:19,vars:18,consts:[[1,"container","py-4"],[1,"text-center","mb-4"],["width","100","height","100",1,"rounded-circle","mb-3",3,"src","alt"],[1,"h4"],[1,"nav","nav-tabs","justify-content-center","mb-4"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["class","text-center py-4",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"h5","mb-4"],["class","list-group mb-4",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"list-group","mb-4"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","align-items-center"],["width","50","height","50",1,"rounded-circle","me-3",3,"src","alt"],[1,"flex-grow-1",3,"routerLink"],[1,"d-flex","justify-content-center"],[3,"pageChange"]],template:function(t,l){t&1&&(n(0,"div",0)(1,"div",1),f(2,"img",2),n(3,"h1",3),s(4),r(),n(5,"div"),s(6),r()(),n(7,"ul",4)(8,"li",5)(9,"a",6),s(10,"Profile"),r()(),n(11,"li",5)(12,"a",7),s(13,"Following"),r()(),n(14,"li",5)(15,"a",7),s(16,"Followers"),r()()(),m(17,K,4,0,"div",8)(18,Z,6,5,"div",9),r()),t&2&&(o(2),a("src","https://secure.gravatar.com/avatar/"+l.profileUser.gravatar+"?s=100",u)("alt",l.profileUser.name),o(2),v(l.profileUser.name),o(2),g("",l.profileUser.micropost," micropost",l.profileUser.micropost!==1?"s":"",""),o(3),a("routerLink",d(11,$,l.userId))("routerLinkActiveOptions",I(13,q)),o(3),a("routerLink",d(14,G,l.userId)),o(3),a("routerLink",d(16,H,l.userId)),o(2),a("ngIf",l.loading),o(),a("ngIf",!l.loading))},dependencies:[L,k,U,O,T,A,N,D,M],encapsulation:2})};export{z as ShowFollowComponent};
